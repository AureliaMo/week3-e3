---
title: "week3-E3"
author: "AureliaMo"
date: "2023-05-05"
output: html_document
---

## Exercise 3

libraries
```{r}
library(readr)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(lubridate)

library(sf)
library(tmap)
```

## Preparation

import data and transform it to the coordinate system. 

```{r}
mydata <- read_delim("aurelia_dataset.csv", delim = ";")

# create datetime column
mydata <- mydata |> 
  mutate(Time = as.character(Time),
         datetime = paste(Date,Time),
         datetime = as.POSIXct(datetime, format = "%d.%m.%Y %X", tz="UTC"),
         datetime = with_tz(datetime, tzone = "Europe/Berlin")
         ) |> 
  select(datetime, Latitude, Longitude)

# convert data to an sf object
mydata <- st_as_sf(mydata, coords = c("Longitude", "Latitude"), crs = 4326, remove = FALSE) # EPSG code for WGS84 = 4326

# convert data to coordinate system CH1903+ LV95
mydata <- st_transform(mydata, crs = 2056) 

head(mydata)
```

store the coordinates in separate columns, explore Data and filter one day

```{r}
# store the coordinates in separate columns
mycoord <- st_coordinates(mydata)

mydata <- cbind(mydata, mycoord)

# explore Data
tmap_mode("view")
tm_shape(mydata)+
  tm_dots()

# choose a single day for the next steps 

oneday <- mydata |> 
  filter(as.Date(datetime) == "2023-04-06")

head(oneday)
```


